# 概述

idle process 用于 process accouting，以及降低能耗。在设计上，调度器没有进程可调度时（例如所有进程都在等待输入），需要停下来，什么都不做，等待下一个中断把它唤醒。 中断可能来自外设（例如网络包、磁盘读操作完成），也可能来自某个进程的定时器。

Linux 调度器中，实现这种“什么都不做”的方式就是引入了 idle 进程。

- 只有当没有任何其他进程需要调度时，才会调度到 idle 进程（因此它的优先级是最低的）。
- 在实现上，这个 idle 进程其实就是内核自身的一部分。
- 当执行到 idle 进程时，它的行为就是“等待中断事件”。

Linux 会为每个 CPU 创建一个 idle task（因为每个 CPU 上一个调度器），并固定在这个 CPU 上执行。 当这个 CPU 上没有其他进程可执行时，就会调度到 idle 进程。它的开销就是 top 里面的 id 统计。

注意，这个 idle process 和 process 的 idle 状态是两个完全不相关的东西，后者指的是 process 在等待 某个事件（例如 I/O 事件）。

## idle process 实现
idle 如何实现视具体处理器和操作系统而定，但目的都是一样的：减少能耗。

最基本的实现方式：HLT 指令会让处理器停止执行（并进入节能模式），直到下一个中断触发它继续执行。 不过有个模块肯定是要保持启用的：中断控制器（interrupt controller）。 当外设触发中断时，中断控制器会通过特定针脚给 CPU 发送信号，唤醒处理器的执行。 实际上现代处理器的行为要比这个复杂的多，但主要还是在节能和快速响应之间做出折中。 有的 CPU 还会在 idle 期间降低处理器频率，以实现节能目标。