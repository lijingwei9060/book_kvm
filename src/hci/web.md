# 目标

核心数据结构保存
1. 产品与组件的对应关系
2. 组件信息


Product代表一个产品，比如机型2288V1, 包含：
1. 产品编码：0231AEYE，类型唯一
2. 产品型号：UN-PCA-BP-8SFF-2U-G5，可以为空
3. 产品代码：UN-PCA-BP-8SFF-2U-G5，不能为空，包含服务类型, 可以和产品型号相同。
4. 描述：  G5 8SFF硬盘背板模块(CTO&BTO)
5. 定制类型： BTO/CTO FIO 可以为空

SV: service
PS
MA: 
BS3
UN ：UniServer

BTO就是典型机型，每款机型有几个典型的配置，供客户选择。  
CTO就是客户可以选择每个单个部件，配什么型号的CPU等，形成定制化的主机。 
CMCTO就是FIO，在CM工厂进行组装的部件.

BTO，Build-To-Order，是指产品经销商根据市场的需要，组装配送模型，组装完成后提交给市场。
CTO，Configuration-To-Order，是指工厂将根据用户的所有要求组装和安装产品，组装后发货给客户。
CMCTO: Contract Manufacture Configuration To Order  CM是加工模式，我司采购物料，卖给工厂；

组件： 
每个选项都有注释
server： 服务器
CPU：主频/何数/功耗， CTO
内存： 型号和数量， 2R*4
线材：Aux信号电缆、背板电源线/sas线

硬盘背板模块： 8盘位
风扇： 2U

硬盘 3种，型号和数量

RAID卡： 不选，泽使用内置raid卡
HBA卡：（带模块吗）
BBU：BAT电容
Riser扩展办卡： 有2个扩展槽位，可以放2个riser卡，需要指明槽位，支持2个FHFL、1个FHHL，1张300W的GPU
    Riser卡和后置硬盘模组 是或的关系，如果是riser卡就是支持多个pcie卡，要是硬盘模块就选择硬盘
    riser卡

PCIE卡
    区分板载插槽和IO扩展模组
光模块和高速线材，有光收发一体 SFP+ /LC/多摸/长度
电源：单电、双电、PDU还是墙体插头
滑轨
防护面板


```rust
struct ServerBOQ{
    pub server: Server,
    pub dimms: (Dimms, usize),
    pub cpus: (CPU, usize),
    /// 可能有多种背板类型，比如一个2.5+3.5
    pub backend_pack: Vec<(BackendPack, usize>),
    pub hds: Vec<(HD, usize)>,
    pub fans: (Fan, usize),
    pub power_supply: (PS, usize),
    pub raid: Option<Raid>,
    pub riser1: Enum<Riser, HDPack>,
    pub riser2: Enum<Riser, HDPack>,
    pub gpus: Vec<(GPU, Position)>,
    pub nics: Vec<(NIC, Position)>,
    pub hbas: Vec<(HBA, Position)>,
    pub raids: Vec<(Raid, Position, HD, usize)>
    pub slide: Option<Slide>,
    pub nvmes: Vec<(NvME, Position)>,
    pub front_pack: Option<FrontPack>,
    pub wire: Vec<Aux/backend_wire/sas_wire>,
    pub services: Vec<Service>, // 服务，硬件维保等
}
```


## 华为

Part即物料编码，是公司范围内对物料的唯一定义，在产品零件选用，物料计划，采购，验收，盘点，储存，发料，发货等业务中使用唯一定义的物料编码，避免一物多名，一名多物或物名错乱等问题。
BOM即物料清单，有多个part编码组成父子项关系，以结构化数据形式表达产品的物料构成，加工层次及顺序等

一、编码唯一性原则。

物料编码的唯一性，通俗是指同一种物料只能对应一个编码，同一个编码只能代表一种物料。唯一性原则是物料最重要的基本要球。


二、编码分类及属性管理。

华为物料编码分类结构框架分为如下4层：行业(segment)、族 (family)、类(class)、商品(commodity)。


三、编码规则。

四、生命周期规则。

生命周期状态是part编码的主控制状态，指part在全生命周期各阶段中，通过关键里程碑点后被赋予的标识，状态值包括： develop ，pilot ，GA，EOM，EOP，EOFS，EOS等。

五、版本规则。

六、 Part编码模板及bom类型管理。

七、 BOM多视图管理。

八、变更管理。

### 生产用的BOM

除了说明父子项的关系外，还有下列必备的字段，现一一说明如下：

(1)序号

由于工序不同或有效时段不同或插件位置不同，使得每一个父项下面可能有多 个子项。这种情况不能通过单位用量来说明，父子项可能不惟一，因此同一个 父项通过序号唯一来描述。由于物料的性质或发料的优先次序而要求子项按一 定的顺序排列，这些也通过序号来实现。 BOM展开时，也按序号排列。

(2)单位用量

表示每一库存单位父项需用到多少库存单位的子项，物料的库存单位在物料代码资料表中定义。

(3)基数

表示父项的数量，如每个纸箱(A物料代码)，可存放100个手表(X)，则BOM中如下表示：

父项：X

序号1

子项：A

单位用量：1

基数：100

(4)损耗率

有些物料由于机器设备的原因，或由于装配的原因等等，正常的单位用量无法满足生产的需要，而要定义损耗的百分比率。

(5)固定损耗量

根据损耗率，不同的订单的损耗用量不同，订单量少的损耗用量也少，订单量大的损耗用量也大，但有的时候即使是少批量的订单也要求有一定的损耗，这部分可通过固定损耗量来定义。也就是：不管多少订单，至少要有这么多损耗。

(6)生效日期和失效日期

由于工程变更或不同时期产品的结构不同而需指定生效日期和失效日期。如果一直有效，则不要指明失效日期，或指定一个很大的日期，或让失效日期＝“1900/1/1”

(7)发料工序号码

每一个父项在物料代码公司资料表中定义了一条工艺路线，每条工艺路线在工艺路线资料表中需至少定义一道工序或多道工序，BOM不同子项发料时可能发到同一道工序，也可能发到不同的工序，在此说明子项发料时应该发放到哪道工序。建立制造令生成用料明细时，如果BOM中没有指明工序号，则把工艺路线资料表中第一道工序当做发料工序

(8)状态

BOM有三种状态: 待确认 确认ok 取消 新增BOM子项时为待确认状态，只有确认OK的子项才可使用。待确认或确认ok的子项都可以取消。

(9)客供品标志

表示子项为客户提供的物料，成本计算时不考虑此物料成本。

(10)制造厂商

有的父项下的某项物料要求一定要使用某个品牌，在此指定品牌制造商，采购下单和生产发料时可参考。即使制造商不同，也可以不定义新的物料代码，以减化物料管理，减少物料代用关系。

(11)插件位置

指明子项放在父项的哪个位置，如一电路板上在P11位置放一电容，指明插件位置为P11。

(12)开始批号

有的时候，BOM中的某个子项，只有指定的批号用到，而在其他批号中无效，可通过开始批号和结束批号说明。

注意只有下列情况才需进行批号控制:

当产品或材料有储存有效期限制时；当产品有特殊要求或印刷包装不同而不用新增机种时,尽量不要使用批号控制。

(13)结束批号

参考上面开始批号。

(14)备注

仅用于注解说明。

### 销售BOM

也叫样品BOM，即零件明细表，仅描述一个成品(机型)的零件清单及标准单位用量，只有一层结构，不包含制造生产的讯息，其子项大都是最低层的零件，也可能是标准的装配件，或经加工的半成品。

但装配件或半成品在研发BOM中不再展开，把其当做零件看待。

产品报价时参考销售BOM材料标准成本。

### 包装BOM

有的公司成品出货时需按客户的要求进行包装，因此即使是同一机种型号，由于客户不同，订单不同，批号不同，而要求不同的包装材料和不同的包装工序。

如果把这部份放在生产用BOM中，需要产生很多的成品物料代码。因此把这部分分开，使用同一个成品物料代码，用不同的客户，订单，批号标志，可以减少很多成品物料代码。

这并不是非常必要，如果包装变化不大，或机种型号本身不是很多，可以把包材部分放入生产用BOM中。包材BOM结构与生产用BOM结构大致相同，另加以下几个字段：

(1)客户代号

如果有指明，则子项只能用在指明的客户，如果没有指明，则所有客户都可用到这个子项。

(2)订单代号

如果有指明，则子项只能用在指明的订单代号，如果没有指明，则所有订单都可用到这个子项。

(3)批号

如果有指明，则子项只能用在指明的批号上，如果没有指明批号，则都可用到这个子项。


## 概念

plm 产品生命周期管理
erp：企业资源计划
srm 供应商管理
scm： 供应链管理


物料成本

制造bom
销售bom
服务清单


财： 会计科目
物料：  原材料、标准件 半成品 成品 
业务伙伴： 客户， 供应商

订单bom
产品配置
销售订单
配置器

超级bom： 参数定义 约束规则 变量规则 配置规则
物料管理
设计bom：派生设计 多平互动设计 bom比较 bom多视图

## 特征规则

公式：

## 金蝶bom

### 超级bom

主产品信息： 
    产品编码
组件信息：
    组件： 类型 编码 名称 型号 单位 数量版本号  用量类型、固定损耗、变动损耗率，生效日期 失效日期
    阶梯用量
    安装位置
    选配控制：  可选、首选、选项互斥， 数量可选（最小-最大）
    特征规则