{
    "items": [
        {
            "content": "[mysqld]\n# aliyun buffer pool: https://help.aliyun.com/document_detail/162326.html?utm_content=g_1000230851\u0026spm=5176.20966629.toubu.3.f2991ddcpxxvD1#title-rey-j7j-4dt\ninnodb_buffer_pool_size=512M\n\n# require port\n# Global_Buffer = innodb_buffer_pool_size = PhysicalMemory *3/4\n# max_connections = (PhysicalMemory  - Global_Buffer) / single_thread_memory\nmax_connections=334\n\n# if memory less than 8Gi, disable performance_schema\nperformance_schema=OFF\n\n# alias replica_exec_mode. Aliyun slave_exec_mode=STRICT\nslave_exec_mode=IDEMPOTENT\n\n# gtid\ngtid_mode=ON\nenforce_gtid_consistency=ON\n\n#server \u0026 instances\nthread_stack=262144\nthread_cache_size=60\n# ulimit -n\nopen_files_limit=1048576\nlocal_infile=ON\npersisted_globals_load=OFF\nsql_mode=NO_ENGINE_SUBSTITUTION\n#Default 4000\ntable_open_cache=4000\n\n# under high number thread (such as 128 threads), this value will cause sysbench fails\n# if so, change it to 100000 or higher.\nmax_prepared_stmt_count=16382\n\nperformance_schema_digests_size=10000\nperformance_schema_events_stages_history_long_size=10000\nperformance_schema_events_transactions_history_long_size=10000\nread_buffer_size=262144\nread_rnd_buffer_size=524288\njoin_buffer_size=262144\nsort_buffer_size=262144\n\n# default_authentication_plugin=mysql_native_password    #From mysql8.0.23 is deprecated.\n# authentication_policy=mysql_native_password,\nback_log=5285\nhost_cache_size=867\nconnect_timeout=10\n\n# character-sets-dir=/usr/share/mysql-8.0/charsets\n\nport=3306\nmysqlx-port=33060\nmysqlx=0\n\ndatadir=/var/lib/mysql/data\nplugin_dir=/usr/lib64/mysql/plugin/\nlog_error=/var/lib/mysql/log/mysqld-error.log\nslow_query_log_file=/var/lib/mysql/log/mysqld-slowquery.log\ngeneral_log_file=/var/lib/mysql/log/mysqld.log\n\n\nlog_statements_unsafe_for_binlog=OFF\nlog_error_verbosity=2\nlog_output=FILE\nslow_query_log=ON\nlong_query_time=5\n\n\n#innodb\ninnodb_doublewrite_batch_size=16\ninnodb_doublewrite_pages=32\ninnodb_flush_method=O_DIRECT\ninnodb_io_capacity=200\ninnodb_io_capacity_max=2000\ninnodb_log_buffer_size=8388608\n#innodb_log_file_size and innodb_log_files_in_group are deprecated in MySQL 8.0.30. These variables are superseded by innodb_redo_log_capacity.\n#innodb_log_file_size=134217728\n#innodb_log_files_in_group=2\ninnodb_redo_log_capacity=536870912\ninnodb_open_files=4000\ninnodb_purge_threads=1\ninnodb_read_io_threads=4\n# innodb_print_all_deadlocks=ON    # AWS not set\nkey_buffer_size=16777216\n\n# binlog\n# master_info_repository=TABLE\n# From mysql8.0.23 is deprecated.\nbinlog_cache_size=32768\n# AWS binlog_format=MIXED, Aliyun is ROW\nbinlog_format=MIXED\nbinlog_row_image=FULL\n# Aliyun AWS binlog_order_commits=ON\nbinlog_order_commits=ON\nlog-bin=/var/lib/mysql/binlog/mysql-bin\nlog_bin_index=/var/lib/mysql/binlog/mysql-bin.index\nbinlog_expire_logs_seconds=604800\nmax_binlog_size=134217728\nlog_replica_updates=1\n# binlog_rows_query_log_events=ON #AWS not set\n# binlog_transaction_dependency_tracking=WRITESET    #Default Commit Order, Aws not set\n\n# replay log\n# relay_log_info_repository=TABLE\n# From mysql8.0.23 is deprecated.\nrelay_log_recovery=ON\nrelay_log=relay-bin\nrelay_log_index=relay-bin.index\n\n# audit log\nloose_audit_log_handler=FILE # FILE, SYSLOG\nloose_audit_log_file=/var/lib/mysql/auditlog/audit.log\nloose_audit_log_buffer_size=1Mb\nloose_audit_log_policy=QUERIES # ALL, LOGINS, QUERIES, NONE\nloose_audit_log_strategy=ASYNCHRONOUS\nloose_audit_log_rotate_on_size=10485760\nloose_audit_log_rotations=5\n## mysql\u003e select host, user from mysql.user;\n## +-----------+------------------+\n## | host      | user             |\n## +-----------+------------------+\n## | %         | root             |\n## | %         | u1               |\n## | localhost | mysql.infoschema |\n## | localhost | mysql.session    |\n## | localhost | mysql.sys        |\n## | localhost | root             |\n## +-----------+------------------+\nloose_audit_log_exclude_accounts=root@%,root@localhost\n\n# semi sync, it works\n# loose_rpl-semi-sync-source-enabled = 1\n# loose_rpl_semi_sync_source_timeout = 0\n# loose_rpl-semi-sync-replica-enabled = 1\n\npid-file=/var/run/mysqld/mysqld.pid\nsocket=/var/run/mysqld/mysqld.sock\n\n## smartengine base config\n#default_storage_engine=smartengine\ndefault_tmp_storage_engine=innodb\n\n# log_error_verbosity=3\n# binlog_format=ROW\n\n# set utf8 encoding\ncollation_server = utf8mb4_unicode_520_ci\ncharacter_set_server = utf8mb4\n\n[mysql]\ndefault-character-set=utf8mb4\n\n[client]\nport=3306\nsocket=/var/run/mysqld/mysqld.sock\ndefault-character-set=utf8mb4",
            "fileName": "my.cnf"
        }
    ]
}